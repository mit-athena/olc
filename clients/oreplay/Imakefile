/*
 * $Source: /afs/dev.mit.edu/source/repository/athena/bin/olc/clients/oreplay/Imakefile,v $
 * $Id: Imakefile,v 1.6 1991-04-18 21:53:28 lwvanels Exp $
 * Copyright (C) 1989,1990 by the Massachusetts Institute of Technology.
 * For copying and distribution information, see the file "mit-copyright.h".
 */

/* #define Profiling */

#ifdef Profiling
LIBSUFFIX=_p
EXTRA_LOAD_FLAGS=-pg
#endif

SRCS=	oreplay.c

OBJS= oreplay.o

#ifdef Profiling
DEFINES= -DPROFILE
.c.o:
	$(CC) -pg -c $(CFLAGS) $*.c
#else
DEFINES=
#endif /* Profiling */


LOCAL_LIBRARIES= $(CLIENTLIB) $(COMMONLIB)
SYS_LIBRARIES= $(HesiodLib) $(KerberosLib)

NormalProgramTarget(oreplay,$(OBJS),,$(LOCAL_LIBRARIES),$(SYS_LIBRARIES))

SaberProgramTarget(oreplay,$(SRCS),$(OBJS),$(LOCAL_LIBRARIES),$(SYS_LIBRARIES))

depend: Makefile
	$(DEPEND) -s "# DO NOT DELETE" -- $(ALLDEFINES) $(SRCS)

LintTarget()

#ifdef InstallAltLoc
InstallProgram(oreplay,/mit/olcdev/@sys)
install::
	(cd /mit/olcdev/@sys; $(RM) oshow; $(LN) oreplay oshow; $(RM) olist; $(LN) oreplay olist)
#else
InstallProgram(oreplay,$(DESTDIR)/usr/etc)
install::
	(cd $(DESTDIR)/usr/etc; $(RM) oshow; $(LN) oreplay oshow; $(RM) olist; $(LN) oreplay olist)
#endif

olist:
	$(RM) olist
	$(LN) oreplay olist

clean::
	$(RM) olist

oshow:
	$(RM) oshow
	$(LN) oreplay oshow

clean::
	$(RM) oshow

LintTarget()

AllTarget(oreplay olist oshow)
