#
# $Id: Imakefile,v 1.16 1999-01-22 23:12:18 ghudson Exp $
#
# For copying and distribution information,
# please see the file <mit-copyright.h>.
#
#

/*#define Profiling*/

#ifdef Profiling
LIBSUFFIX=_p
EXTRA_LOAD_FLAGS=-pg
#endif

SRCS=		main.c procs.c visual.c \
		x_ask.c x_instance.c x_motd.c x_resolve.c \
		x_send.c x_topic.c x_utils.c Cursor.c converters.c
OBJS=		main.o procs.o visual.o \
		x_ask.o x_instance.o x_motd.o x_resolve.o \
		x_send.o x_topic.o x_utils.o Cursor.o converters.o

#if DoUsageLog
LOCAL_LIBRARIES= $(CLIENTLIB) $(COMMONLIB) $(CONFIGLIB) $(LOGGERLIB)
#else
LOCAL_LIBRARIES= $(CLIENTLIB) $(COMMONLIB) $(CONFIGLIB)
#endif

INCLUDES       =  $(XIncludes) $(MotifIncludes)
SYS_LIBRARIES  =  $(HesiodLib) $(ComErrLib) $(KerberosLib) \
		  $(MotifUtilLib) $(MotifLib) \
                  $(MotifToolLib) $(XUtilLib) $(XLib) 
DEPLIBS= $(LOCAL_LIBRARIES)
NO_PROTO=-D_NO_PROTO

DEFINES=-DSA_LOC=\"/usr/athena/bin/xbrowser\" $(NO_PROTO)

Xolc: Xolc.cpp
	$(RM) Xolc
	$(CPP) -P Xolc.cpp > Xolc

NormalProgramTarget(xolc,$(OBJS),$(LOCAL_LIBRARIES),$(LOCAL_LIBRARIES),$(SYS_LIBRARIES))
SaberProgramTarget(xolc,$(SRCS),$(OBJS),$(LOCAL_LIBRARIES),$(SYS_LIBRARIES))

#ifdef InstallAltLoc
InstallProgram(xolc,$(DESTDIR)/usr/athena/bin)
InstallNonExec(Xolc,$(DESTDIR)/usr/athena/lib/X11/app-defaults)
#else
InstallProgram(xolc,$(DESTDIR)/usr/athena)
InstallNonExec(Xolc,$(DESTDIR)/usr/lib/X11/app-defaults)
#endif

DependTarget()
LintTarget()

clean::
	$(RM) Xolc

AllTarget(xolc Xolc)
