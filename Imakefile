#
# $Id: Imakefile,v 1.12 1991-02-10 14:44:44 lwvanels Exp $
# $Source: /afs/dev.mit.edu/source/repository/athena/bin/olc/Imakefile,v $
#
# Imakefile for top level directory.
#

#define IHaveSubdirs
SUBDIRS=common clients server # man lib 
RM=rm -f
MV=mv -f

all::

world::
	make ${MFLAGS} Makefile
	@make ${MFLAGS} -f Makefile world2

world2:
	make ${MFLAGS} Makefiles
	make ${MFLAGS} depend
	make ${MFLAGS} all

install::
#ifndef TestInstall
	$(RM) $(DESTDIR)/usr/lib/olc
	#if defined(ultrix)
	ln -s /var/usr/lib/olc $(DESTDIR)/usr/lib/olc
	#else
	ln -s /site/usr/lib/olc $(DESTDIR)/usr/lib/olc
	#endif
#endif

mytags::
	make ${MFLAGS} olc_tags olcd_tags rpd_tags polld_tags

olc_tags::
	$(TAGS) clients/tty//**/*.[ch] clients/lib//**/*.[ch] clients/parser//**/*.[ch] clients/olc//**/*.[ch] common//**/*.[ch] include/olc//**/*.[ch]
	$(MV) TAGS TAGS.olc

olcd_tags::
	$(TAGS) common//**/*.[ch] include/olc//**/*.[ch] include//**/*.[ch] server/olcd//**/*.[ch]
	$(MV) TAGS TAGS.olcd

rpd_tags::
	$(TAGS) include//**/*.[ch] server/rpd//**/*.[ch]
	$(MV) TAGS TAGS.rpd

polld_tags::
	$(TAGS) include//**/*.[ch] server/polld//**/*.[ch]
	$(MV) TAGS TAGS.polld
