/*
 * $Source: /afs/dev.mit.edu/source/repository/athena/bin/olc/server/rpd/Imakefile,v $
 * $Id: Imakefile,v 1.5 1990-12-12 13:23:06 lwvanels Exp $
 */

/* #define Profiling */

#ifdef Profiling
LIBSUFFIX=_p
EXTRA_LOAD_FLAGS=-pg
#endif

S_SRCS=	rpd.c fdcache.c handle_request.c io.c acl_files.c kopt.c

S_OBJS=	rpd.o fdcache.o handle_request.o io.o acl_files.o kopt.o

C_SRCS=	oreplay.c io.c

C_OBJS= oreplay.o io.o

#ifdef Profiling
DEFINES= -DPROFILE
.c.o:
	$(CC) -pg -c $(CFLAGS) $*.c
#else
DEFINES=
#endif /* Profiling */


OREPLAY_LIBRARIES=	$(HesiodLib) $(KerberosLib)
SERVER_LIBRARIES=	$(KerberosLib)

INCLUDES= -I.

NormalProgramTarget(oreplay,$(C_OBJS),,$(OREPLAY_LIBRARIES),)
NormalProgramTarget(rpd,$(S_OBJS),,$(SERVER_LIBRARIES),)

SaberProgramTarget(oreplay,$(C_SRCS),$(C_OBJS),$(OREPLAY_LIBRARIES),)
SaberProgramTarget(rpd,$(S_SRCS),$(S_OBJS),$(SERVER_LIBRARIES),)

DependSrcs()
LintTarget()

olist::
	$(RM) olist
	$(LN) oreplay olist

AllTarget(oreplay rpd olist)
