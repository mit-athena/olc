/*
 * $Source: /afs/dev.mit.edu/source/repository/athena/bin/olc/server/polld/Imakefile,v $
 * $Id: Imakefile,v 1.8 1991-04-18 22:21:15 lwvanels Exp $
 * Copyright (C) 1991 by the Massachusetts Institute of Technology.
 * For copying and distribution information, see the file "mit-copyright.h".
 */

/*#define Profiling*/

#ifdef Profiling
LIBSUFFIX=_p
EXTRA_LOAD_FLAGS=-pg
#endif

SRCS=comm.c get_list.c locate.c polld.c hosthash.c
OBJS=comm.o get_list.o locate.o polld.o hosthash.o

LOCAL_LIBRARIES=$(COMMONLIB) $(CLIENTLIB)

#ifdef Profiling
DEFINES= -DPROFILE
.c.o:
	$(CC) -pg -c $(CFLAGS) $*.c
#else
DEFINES=
#endif /* Profiling */

DEPLIBS=$(LOCAL_LIBRARIES)

#if HaveKerberos || HaveZephyr
SYS_LIBRARIES=	$(HesiodLib) $(ZephyrLib) $(KerberosLib) $(ComErrLib)
#else
SYS_LIBRARIES=	$(HesiodLib) $(ZephyrLib) $(KerberosLib) $(ComErrLib)
#endif

NormalProgramTarget(polld,$(OBJS),$(LOCAL_LIBRARIES),$(LOCAL_LIBRARIES),$(SYS_LIBRARIES))

SaberProgramTarget(polld,$(SRCS),$(OBJS),$(LOCAL_LIBRARIES),$(SYS_LIBRARIES))

DependTarget()
LintTarget()

#ifdef InstallAltLoc
InstallProgram(polld,/mit/olcdev/@sys)
#else
InstallProgram(polld,$(DESTDIR)/usr/etc)
#endif

AllTarget(polld)
