/*
 * $Source: /afs/dev.mit.edu/source/repository/athena/bin/olc/server/polld/Imakefile,v $
 * $Id: Imakefile,v 1.6 1991-03-29 01:12:34 lwvanels Exp $
 */

/*#define Profiling*/

#ifdef Profiling
LIBSUFFIX=_p
EXTRA_LOAD_FLAGS=-pg
#endif

SRCS=comm.c get_list.c locate.c polld.c hosthash.c
OBJS=comm.o get_list.o locate.o polld.o hosthash.o

LOCAL_LIBRARIES=$(COMMONLIB) $(CLIENTLIB)

#ifdef Profiling
DEFINES=-DSYSLOG -DPROFILE
.c.o:
	$(CC) -pg -c $(CFLAGS) $*.c
#else
DEFINES=-DSYSLOG
#endif /* Profiling */

DEPLIBS=$(LOCAL_LIBRARIES)

#if HaveKerberos || HaveZephyr
SYS_LIBRARIES=	$(HesiodLib) $(ZephyrLib) $(KerberosLib) $(ComErrLib)
#else
SYS_LIBRARIES=	$(HesiodLib) $(ZephyrLib) $(KerberosLib) $(ComErrLib)
#endif
INCLUDES= -I.

NormalProgramTarget(polld,$(OBJS),$(LOCAL_LIBRARIES),$(LOCAL_LIBRARIES),$(SYS_LIBRARIES))

SaberProgramTarget(polld,$(SRCS),$(OBJS),$(LOCAL_LIBRARIES),$(SYS_LIBRARIES))

DependTarget()
LintTarget()

#ifdef InstallAltLoc
InstallProgram(polld,/mit/olcdev/@sys)
#else
InstallProgram(polld,$(DESTDIR)/usr/etc)
#endif

AllTarget(polld)
