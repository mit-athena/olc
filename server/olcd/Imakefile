/*
 * $Source: /afs/dev.mit.edu/source/repository/athena/bin/olc/server/olcd/Imakefile,v $
 * $Id: Imakefile,v 1.19 1991-04-08 21:14:43 lwvanels Exp $
 */

/*#define Profiling*/

#ifdef Profiling
LIBSUFFIX=_p
EXTRA_LOAD_FLAGS=-pg
#endif


SRCS=	backup.c data_utils.c db.c s_io.c log.c olcd.c \
	data.c notify.c utils.c list.c acl_files.c \
	requests_olc.c requests_admin.c syslog.c statistics.c motd.c

OBJS=	backup.o data_utils.o db.o s_io.o log.o olcd.o \
	data.o notify.o utils.o list.o acl_files.o \
	requests_olc.o requests_admin.o syslog.o statistics.o motd.o

LOCAL_LIBRARIES=$(COMMONLIB)

#ifdef Profiling
DEFINES=-DPROFILE -DCDATE="\"`date`\""
.c.o:
	$(CC) -pg -c $(CFLAGS) $*.c
#else
DEFINES=-DCDATE="\"`date`\""
#endif /* Profiling */

DEPLIBS=$(LOCAL_LIBRARIES)

#if HaveZephyr || HaveKerberos
SYS_LIBRARIES=	$(HesiodLib) $(ZephyrLib) $(ComErrLib) $(KerberosLib) $(misc)
#else
SYS_LIBRARIES=	$(HesiodLib) $(ZephyrLib) $(KerberosLib) $(misc)
#endif

INCLUDES= -I.

NormalProgramTarget(olcd,$(OBJS),$(LOCAL_LIBRARIES),$(LOCAL_LIBRARIES),$(SYS_LIBRARIES))

SaberProgramTarget(olcd,$(SRCS),$(OBJS),$(LOCAL_LIBRARIES),$(SYS_LIBRARIES))

DependTarget()
LintTarget()

#ifdef InstallAltLoc
InstallProgram(olcd,/mit/olcdev/@sys)
#else
InstallProgram(olcd,$(DESTDIR)/usr/etc)
#endif

AllTarget(olcd)
