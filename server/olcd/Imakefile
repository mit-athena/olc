/*
 * $Source: /afs/dev.mit.edu/source/repository/athena/bin/olc/server/olcd/Imakefile,v $
 * $Id: Imakefile,v 1.7 1990-07-16 10:05:44 vanharen Exp $
 */

/*#define UseCPlusPlus*/
/*#define NoGCC*/

/*
 * Define UseCPlusPlus to use G++ for compiling; otherwise, standard
 * $(CC) is used.  (NoGCC forces /bin/cc instead of the compiler
 * specified in site.def.)
 */

#ifdef UseCPlusPlus
/* NOTE:  acl_files.c must be compiled as C code, not C++ */
misc=-lg++

.c.o:
	$(C++) $(C++FLAGS) -c $<
#else
misc=
#ifdef NoGCC
CC=/bin/cc
#endif		/* NoGCC */
#endif		/* UseCPlusPlus */

SRCS=	backup.c data_utils.c db.c io.c log.c olcd.c \
	data.c notify.c utils.c list.c acl_files.c \
	requests_olc.c requests_admin.c syslog.c statistics.c

OBJS=	backup.o data_utils.o db.o io.o log.o olcd.o \
	data.o notify.o utils.o list.o acl_files.o \
	requests_olc.o requests_admin.o syslog.o statistics.o

L_SRCS=	lumberjack.c

L_OBJS= lumberjack.o

LOCAL_LIBRARIES=$(COMMONLIB)
DEFINES=-DLOG -DSYSLOG
DEPLIBS=$(LOCAL_LIBRARIES)


SYS_LIBRARIES=	$(HesiodLib) $(DbmLib) $(ZephyrLib) $(ComErrLib) \
		$(KerberosLib) $(misc)

INCLUDES= -I.

NormalProgramTarget(olcd,$(OBJS),$(LOCAL_LIBRARIES),$(LOCAL_LIBRARIES),$(SYS_LIBRARIES))

NormalProgramTarget(lumberjack,$(L_OBJS),,,)

DependTarget()
LintTarget()
TagsTarget()

AllTarget(olcd lumberjack)
